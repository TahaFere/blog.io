<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>G√ºzelliƒüim ƒ∞√ßin ‚ù§Ô∏è</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        :root { --p: #6a0dad; --lp: #9370db; --dp: #2e003e; }
        body { 
            margin: 0; background: linear-gradient(135deg, #1a0026, #4b0082); 
            color: white; font-family: sans-serif; display: flex; flex-direction: column; align-items: center; 
            overflow-x: hidden; touch-action: pan-y;
        }
        section { width: 100%; max-width: 500px; padding: 30px 10px; text-align: center; border-bottom: 1px solid rgba(255,255,255,0.1); box-sizing: border-box; }

        /* GALERƒ∞ */
        .gallery-wrap { position: relative; width: 100%; height: 350px; background: #000; border-radius: 15px; overflow: hidden; border: 3px solid var(--lp); }
        .gallery-img { position: absolute; top:0; left:0; width: 100%; height: 100%; object-fit: cover; opacity: 0; transition: all 1.5s ease-in-out; transform: scale(1.1); }
        .gallery-img.active { opacity: 1; transform: scale(1); }

        /* √áARK */
        #wheel-wrapper { position: relative; width: 260px; height: 260px; margin: auto; border: 8px solid white; border-radius: 50%; overflow: hidden; transition: transform 4s cubic-bezier(0.15, 0, 0.15, 1); }
        .wheel-part { position: absolute; width: 50%; height: 50%; transform-origin: 100% 100%; }
        .wheel-text { position: absolute; bottom: 25px; right: 5px; width: 100px; transform: rotate(22deg); font-size: 13px; font-weight: bold; color: white; text-align: center; }

        /* KAZIMA - Hata Giderilmi≈ü Stil */
        #scratch-container { position: relative; width: 300px; height: 200px; margin: auto; background: #000; border-radius: 15px; overflow: hidden; border: 2px solid var(--lp); touch-action: none; }
        canvas#scratch-canvas { position: absolute; top: 0; left: 0; z-index: 10; cursor: crosshair; }
        .under-img { width: 300px; height: 200px; object-fit: cover; position: absolute; top: 0; left: 0; z-index: 1; }
        #next-scratch-btn { display: none; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 20; background: var(--lp); color: white; border: none; padding: 12px 24px; border-radius: 25px; font-weight: bold; cursor: pointer; box-shadow: 0 0 20px white; }

        /* YILAN VE Dƒ∞ƒûERLERƒ∞ */
        canvas#snakeGame { background: #000; border: 2px solid var(--lp); border-radius: 10px; margin: 10px auto; display: block; }
        .btn-ctrl { background: var(--p); border: 2px solid var(--lp); color: white; padding: 15px; border-radius: 15px; cursor: pointer; }
        .love-text { position: fixed; color: white; font-weight: bold; font-size: 22px; z-index: 9999; text-shadow: 2px 2px 10px #ff00ea; pointer-events: none; white-space: nowrap; transition: opacity 1s; }
    </style>
</head>
<body>

    <section>
        <h1 style="color: #efd5ff;">G√ºzellik ‚ù§Ô∏è</h1>
        <div id="timer" style="background:rgba(0,0,0,0.3); padding:15px; border-radius:15px; border:1px solid var(--lp);"></div>
    </section>

    <section>
        <h3>Bizim Anƒ±larƒ±mƒ±z üì∏</h3>
        <div class="gallery-wrap">
            <img src="Picture/ani/ani1.jpg" class="gallery-img active">
            <img src="Picture/ani/ani2.jpg" class="gallery-img">
            <img src="Picture/ani/ani3.jpg" class="gallery-img">
        </div>
    </section>

    <section>
        <h3>üéÅ A≈ük √áarkƒ±</h3>
        <div id="wheel-wrapper"></div>
        <button class="btn-ctrl" style="margin-top:20px; width:180px;" onclick="spinWheel()">√áEVƒ∞R!</button>
    </section>

    <section>
        <h3>üñºÔ∏è Gizli Anƒ±mƒ±zƒ± Kazƒ±</h3>
        <div id="scratch-container">
            <button id="next-scratch-btn" onclick="resetScratch()">Ba≈üka Bir Anƒ± Kazƒ± ‚ú®</button>
            <img id="scratch-img" src="Picture/kazi/kazi1.jpg" class="under-img">
            <canvas id="scratch-canvas" width="300" height="200"></canvas>
        </div>
        <p style="font-size:11px; margin-top:5px; opacity:0.8;">%85 temizle, rastgele yeni fotoƒüraf gelsin!</p>
    </section>

    <section>
        <h3>üêç Mor Yƒ±lan Oyunu</h3>
        <button onclick="startSnake()" style="background:#27ae60; color:white; border:none; padding:10px; border-radius:10px; margin-bottom:10px; cursor:pointer; font-weight:bold;">BA≈ûLA</button>
        <canvas id="snakeGame" width="300" height="300"></canvas>
        <div style="display:grid; grid-template-columns: repeat(3, 1fr); width:150px; margin:auto; gap:5px;">
            <div></div><button class="btn-ctrl" onclick="changeDir('UP')">‚ñ≤</button><div></div>
            <button class="btn-ctrl" onclick="changeDir('LEFT')">‚óÄ</button>
            <button class="btn-ctrl" onclick="changeDir('DOWN')">‚ñº</button>
            <button class="btn-ctrl" onclick="changeDir('RIGHT')">‚ñ∂</button>
        </div>
    </section>

    <section style="border:none; margin-bottom:50px;">
        <button onclick="makeSurprise()" style="background:#ff4757; padding:15px 35px; border-radius:50px; border:none; color:white; font-weight:bold; cursor:pointer;">S√úRPRƒ∞Z ‚ù§Ô∏è</button>
    </section>

    <script>
        // SAYA√á
        function updateTimer() {
            const start = new Date("2021-10-08T00:00:00");
            const now = new Date();
            const days = Math.floor((now - start) / (1000*60*60*24));
            document.getElementById('timer').innerHTML = `<b>${days} G√ºnd√ºr</b> seni seviyorum.`;
        }
        setInterval(updateTimer, 1000); updateTimer();

        // GALERƒ∞
        let currentGal = 0;
        const galImgs = document.querySelectorAll('.gallery-img');
        setInterval(() => {
            if(galImgs.length > 0) {
                galImgs[currentGal].classList.remove('active');
                currentGal = (currentGal + 1) % galImgs.length;
                galImgs[currentGal].classList.add('active');
            }
        }, 5000);

        // √áARK
        const gifts = ["√ñp√ºc√ºk", "Sevgi", "Kucaklama", "S√ºrpriz", "Masaj", "Yemek", "Dondurma", "Sinema"];
        const wheel = document.getElementById('wheel-wrapper');
        gifts.forEach((g, i) => {
            const el = document.createElement('div');
            el.className = 'wheel-part';
            const angle = 360 / gifts.length;
            el.style.transform = `rotate(${i*angle}deg) skewY(${90-angle}deg)`;
            el.style.background = i % 2 ? '#6a0dad' : '#9370db';
            const span = document.createElement('div');
            span.className = 'wheel-text';
            span.innerText = g;
            span.style.transform = `skewY(-${90-angle}deg) rotate(${angle/2}deg)`;
            el.appendChild(span);
            wheel.appendChild(el);
        });
        let rot = 0; function spinWheel() { rot += 1800 + Math.random() * 360; wheel.style.transform = `rotate(${rot}deg)`; }

        // KAZIMA - KONSOLE HATASI √á√ñZ√úLM√ú≈û Sƒ∞STEM
        const canvas = document.getElementById('scratch-canvas');
        // 'willReadFrequently' uyarƒ±sƒ±nƒ± √ß√∂zer
        const ctx = canvas.getContext('2d', { willReadFrequently: true });
        const scratchBtn = document.getElementById('next-scratch-btn');
        const scratchImg = document.getElementById('scratch-img');
        const totalKaziPhotos = 5; 

        function initScratch() {
            ctx.globalCompositeOperation = 'source-over';
            ctx.fillStyle = '#b388ff'; ctx.fillRect(0,0,300,200);
            ctx.fillStyle = 'white'; ctx.font = "bold 16px Arial"; ctx.textAlign = "center";
            ctx.fillText("T√ºm√ºn√º Kazƒ± ‚ù§Ô∏è", 150, 105);
            scratchBtn.style.display = 'none';
        }

        function checkScratch() {
            const data = ctx.getImageData(0,0,300,200).data;
            let clear = 0;
            for(let i=3; i<data.length; i+=4) if(data[i] === 0) clear++;
            if(clear > (data.length / 4) * 0.85) scratchBtn.style.display = 'block';
        }

        function resetScratch() {
            const randomNum = Math.floor(Math.random() * totalKaziPhotos) + 1;
            scratchImg.src = `Picture/kazi/kazi${randomNum}.jpg`; 
            initScratch();
        }

        function scratch(e) {
            // Hata mesajlarƒ±nƒ± √∂nlemek i√ßin cancelable kontrol√º
            if (e.cancelable) e.preventDefault();
            
            const rect = canvas.getBoundingClientRect();
            const x = (e.pageX || (e.touches ? e.touches[0].pageX : 0)) - rect.left - window.scrollX;
            const y = (e.pageY || (e.touches ? e.touches[0].pageY : 0)) - rect.top - window.scrollY;
            
            ctx.globalCompositeOperation = 'destination-out';
            ctx.beginPath(); ctx.arc(x, y, 25, 0, Math.PI*2); ctx.fill();
            checkScratch();
        }

        canvas.addEventListener('mousedown', () => canvas.onmousemove = scratch);
        window.addEventListener('mouseup', () => canvas.onmousemove = null);
        canvas.addEventListener('touchstart', scratch, {passive: false});
        canvas.addEventListener('touchmove', scratch, {passive: false});
        initScratch();

        // YILAN OYUNU
        const sCanvas = document.getElementById('snakeGame'), sCtx = sCanvas.getContext('2d');
        let snake, food, d, gameLoop;
        function startSnake() {
            clearInterval(gameLoop);
            snake = [{x: 150, y: 150}]; d = "RIGHT";
            food = {x: Math.floor(Math.random()*19)*15, y: Math.floor(Math.random()*19)*15};
            gameLoop = setInterval(drawSnake, 180);
        }
        function changeDir(dir) { d = dir; }
        function drawSnake() {
            sCtx.fillStyle = "black"; sCtx.fillRect(0,0,300,300);
            sCtx.font = "15px serif"; sCtx.fillText("‚ù§Ô∏è", food.x, food.y + 12);
            snake.forEach((p, i) => sCtx.fillText(i === 0 ? "üíú" : "üü£", p.x, p.y + 12));
            let hX = snake[0].x, hY = snake[0].y;
            if(d=="LEFT") hX-=15; if(d=="UP") hY-=15; if(d=="RIGHT") hX+=15; if(d=="DOWN") hY+=15;
            if(hX===food.x && hY===food.y) food={x:Math.floor(Math.random()*19)*15, y:Math.floor(Math.random()*19)*15}; else snake.pop();
            if(hX<0 || hX>=300 || hY<0 || hY>=300) return clearInterval(gameLoop);
            snake.unshift({x:hX, y:hY});
        }

        // KONFETƒ∞
        function makeSurprise() {
            confetti({ particleCount: 200, spread: 80, origin: { y: 0.6 } });
            const sW = window.innerWidth, sH = window.innerHeight;
            for(let i=0; i<12; i++) {
                setTimeout(() => {
                    const t = document.createElement('div');
                    t.className = 'love-text'; t.innerText = "Seni Seviyorum ‚ù§Ô∏è";
                    t.style.left = Math.random() * (sW - 200) + "px";
                    t.style.top = Math.random() * (sH - 50) + "px";
                    document.body.appendChild(t);
                    setTimeout(() => { t.style.opacity="0"; setTimeout(() => t.remove(), 1000); }, 5000);
                }, i * 300);
            }
        }
    </script>
</body>
</html>
